{"ast":null,"code":"import _objectSpread from\"C:/Users/DELL/OneDrive/Desktop/collabeaseproject/collabeasesorce/collabease/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useContext,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{AuthContext}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[form,setForm]=useState({email:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const{login,googleLogin,isAuthenticated}=useContext(AuthContext);const navigate=useNavigate();const location=useLocation();// Check for error messages in the navigation state\nuseEffect(()=>{if(location.state&&location.state.error){setError(location.state.error);// Clear the state so the message doesn't persist on refresh\nwindow.history.replaceState({},document.title);}},[location]);// Redirect if already authenticated\nuseEffect(()=>{if(isAuthenticated){navigate('/dashboard',{replace:true});}},[isAuthenticated,navigate]);const handleChange=e=>{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{console.log('Attempting login with:',form.email);const result=await login(form);if(result.success){console.log('Login successful, redirecting to dashboard');navigate('/dashboard',{replace:true});}else{console.error('Login failed:',result.message);setError(result.message);}}catch(err){console.error('Login error:',err);setError('An error occurred. Please try again.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-primary\",children:\"Taskboard-pro\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-2\",children:\"Welcome back! Log in to your account\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-8\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-l-4 border-red-500 p-4 mb-6\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-700\",children:error})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"email\",name:\"email\",placeholder:\"you@example.com\",value:form.email,onChange:handleChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"block text-sm font-medium text-gray-700\",children:\"Password\"}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"text-xs text-primary hover:text-primary-hover\",children:\"Forgot password?\"})]}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",type:\"password\",name:\"password\",placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\",value:form.password,onChange:handleChange,required:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-primary hover:bg-primary-hover text-white font-medium py-2 px-4 rounded-md transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed\",children:loading?'Logging in...':'Log in'}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex py-5 items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow border-t border-gray-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"flex-shrink mx-4 text-sm text-gray-600\",children:\"or\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-grow border-t border-gray-300\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:googleLogin,className:\"w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 font-medium py-2 px-4 rounded-md hover:bg-gray-50 transition duration-200 ease-in-out\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.cdnlogo.com/logos/g/35/google-icon.svg\",alt:\"Google\",className:\"w-5 h-5 mr-2\"}),\"Log in with Google\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-6\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 text-sm\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/signup\",className:\"text-primary hover:text-primary-hover\",children:\"Sign up\"})]})})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useContext","useEffect","Link","useNavigate","useLocation","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","form","setForm","email","password","error","setError","loading","setLoading","login","googleLogin","isAuthenticated","navigate","location","state","window","history","replaceState","document","title","replace","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","console","log","result","success","message","err","className","children","onSubmit","htmlFor","id","type","placeholder","onChange","required","href","disabled","onClick","src","alt","to"],"sources":["C:/Users/DELL/OneDrive/Desktop/collabeaseproject/collabeasesorce/collabease/client/src/pages/Login.jsx"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { AuthContext } from '../context/AuthContext';\n\nconst Login = () => {\n  const [form, setForm] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  \n  const { login, googleLogin, isAuthenticated } = useContext(AuthContext);\n  const navigate = useNavigate();\n  const location = useLocation();\n  \n  // Check for error messages in the navigation state\n  useEffect(() => {\n    if (location.state && location.state.error) {\n      setError(location.state.error);\n      // Clear the state so the message doesn't persist on refresh\n      window.history.replaceState({}, document.title);\n    }\n  }, [location]);\n  \n  // Redirect if already authenticated\n  useEffect(() => {\n    if (isAuthenticated) {\n      navigate('/dashboard', { replace: true });\n    }\n  }, [isAuthenticated, navigate]);\n  \n  const handleChange = (e) => {\n    setForm({ ...form, [e.target.name]: e.target.value });\n  };\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    \n    try {\n      console.log('Attempting login with:', form.email);\n      const result = await login(form);\n      \n      if (result.success) {\n        console.log('Login successful, redirecting to dashboard');\n        navigate('/dashboard', { replace: true });\n      } else {\n        console.error('Login failed:', result.message);\n        setError(result.message);\n      }\n    } catch (err) {\n      console.error('Login error:', err);\n      setError('An error occurred. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gray-100 flex flex-col justify-center items-center p-4\">\n      <div className=\"w-full max-w-md\">\n        <div className=\"text-center mb-8\">\n          <h1 className=\"text-3xl font-bold text-primary\">Taskboard-pro</h1>\n          <p className=\"text-gray-600 mt-2\">Welcome back! Log in to your account</p>\n        </div>\n        \n        <div className=\"bg-white rounded-lg shadow-md p-8\">\n          {error && (\n            <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-6\">\n              <p className=\"text-red-700\">{error}</p>\n            </div>\n          )}\n          \n          <form onSubmit={handleSubmit}>\n            <div className=\"mb-6\">\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n              <input\n                id=\"email\"\n                type=\"email\"\n                name=\"email\"\n                placeholder=\"you@example.com\"\n                value={form.email}\n                onChange={handleChange}\n                required\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary\"\n              />\n            </div>\n            \n            <div className=\"mb-6\">\n              <div className=\"flex justify-between mb-1\">\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">Password</label>\n                <a href=\"#\" className=\"text-xs text-primary hover:text-primary-hover\">Forgot password?</a>\n              </div>\n              <input\n                id=\"password\"\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"••••••••\"\n                value={form.password}\n                onChange={handleChange}\n                required\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary focus:border-primary\"\n              />\n            </div>\n            \n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-primary hover:bg-primary-hover text-white font-medium py-2 px-4 rounded-md transition duration-200 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {loading ? 'Logging in...' : 'Log in'}\n            </button>\n            \n            <div className=\"relative flex py-5 items-center\">\n              <div className=\"flex-grow border-t border-gray-300\"></div>\n              <span className=\"flex-shrink mx-4 text-sm text-gray-600\">or</span>\n              <div className=\"flex-grow border-t border-gray-300\"></div>\n            </div>\n            \n            <button\n              type=\"button\"\n              onClick={googleLogin}\n              className=\"w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 font-medium py-2 px-4 rounded-md hover:bg-gray-50 transition duration-200 ease-in-out\"\n            >\n              <img\n                src=\"https://cdn.cdnlogo.com/logos/g/35/google-icon.svg\"\n                alt=\"Google\"\n                className=\"w-5 h-5 mr-2\"\n              />\n              Log in with Google\n            </button>\n          </form>\n          \n          <div className=\"text-center mt-6\">\n            <p className=\"text-gray-600 text-sm\">\n              Don't have an account?{' '}\n              <Link to=\"/signup\" className=\"text-primary hover:text-primary-hover\">\n                Sign up\n              </Link>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}