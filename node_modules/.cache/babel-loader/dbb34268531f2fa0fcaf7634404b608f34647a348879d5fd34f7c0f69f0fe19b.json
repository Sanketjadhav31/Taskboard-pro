{"ast":null,"code":"import _objectSpread from\"C:/Users/DELL/OneDrive/Desktop/collabeaseproject/collabeasesorce/collabease/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useContext}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import axios from'axios';import TaskBoard from'../components/TaskBoard';import{ProjectContext}from'../context/ProjectContext';import{AuthContext}from'../context/AuthContext';import Chat from'../components/Chat';import{ThemeContext}from'../context/ThemeContext';import ProjectMembers from'../components/ProjectMembers';import ProjectAutomations from'../components/ProjectAutomations';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProjectDetail=()=>{var _project$members;const{id}=useParams();const navigate=useNavigate();const{getProject,updateProject,deleteProject,addTeamMember,removeTeamMember}=useContext(ProjectContext);const{darkMode}=useContext(ThemeContext);const{user}=useContext(AuthContext);const[project,setProject]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[view,setView]=useState('board');// board, list, calendar\nconst[isEditing,setIsEditing]=useState(false);const[form,setForm]=useState({name:'',description:'',color:'#6366f1',dueDate:'',isCompleted:false});const[showAddMemberModal,setShowAddMemberModal]=useState(false);const[newMemberEmail,setNewMemberEmail]=useState('');const[addMemberLoading,setAddMemberLoading]=useState(false);const[addMemberError,setAddMemberError]=useState('');const[taskStats,setTaskStats]=useState({total:0,completed:0,inProgress:0,pending:0});const[activeTab,setActiveTab]=useState('tasks');useEffect(()=>{fetchProjectDetails();// Check if there's a stored active tab in localStorage\nconst storedTab=localStorage.getItem('activeProjectTab');if(storedTab){setActiveTab(storedTab);localStorage.removeItem('activeProjectTab');// Clear it after use\n}},[id]);useEffect(()=>{if(project&&project.tasks){// Calculate task statistics\nconst stats={total:project.tasks.length,completed:project.tasks.filter(t=>t.status==='completed').length,inProgress:project.tasks.filter(t=>t.status==='in_progress').length,pending:project.tasks.filter(t=>t.status==='to_do'||t.status==='backlog').length};setTaskStats(stats);}},[project]);const fetchProjectDetails=async()=>{try{setLoading(true);setError('');const token=localStorage.getItem('token');if(!token){setError('Authorization required. Please log in again.');setLoading(false);return;}const result=await getProject(id);if(result.success){setProject(result.project);// Initialize the form with project data\nsetForm({name:result.project.name||'',description:result.project.description||'',color:result.project.color||'#6366f1',dueDate:result.project.dueDate?new Date(result.project.dueDate).toISOString().split('T')[0]:'',isCompleted:result.project.isCompleted||false});}else{setError(result.message||'Failed to load project');}}catch(err){console.error('Error in fetchProjectDetails:',err);setError('Failed to load project. Please try again.');}finally{setLoading(false);}};const handleChange=e=>{const value=e.target.type==='checkbox'?e.target.checked:e.target.value;setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{setLoading(true);setError('');const result=await updateProject(id,form);if(result.success){setProject(result.project);setIsEditing(false);}else{setError(result.message||'Failed to update project');}}catch(err){console.error('Error updating project:',err);setError('Failed to update project. Please try again.');}finally{setLoading(false);}};const handleDelete=async()=>{if(!window.confirm('Are you sure you want to delete this project? This action cannot be undone.')){return;}try{setLoading(true);setError('');const result=await deleteProject(id);if(result.success){navigate('/projects',{replace:true});}else{setError(result.message||'Failed to delete project');}}catch(err){console.error('Error deleting project:',err);setError('Failed to delete project. Please try again.');}finally{setLoading(false);}};const handleAddMember=async e=>{e.preventDefault();if(!newMemberEmail.trim())return;try{setAddMemberLoading(true);setAddMemberError('');const result=await addTeamMember(id,newMemberEmail);if(result.success){// Refresh project details to get updated member list\nawait fetchProjectDetails();setShowAddMemberModal(false);setNewMemberEmail('');}else{setAddMemberError(result.message||'Failed to add team member');}}catch(err){console.error('Error adding team member:',err);setAddMemberError('Failed to add team member. Please try again.');}finally{setAddMemberLoading(false);}};const handleRemoveMember=async userId=>{if(!window.confirm('Are you sure you want to remove this team member?')){return;}try{setLoading(true);setError('');const result=await removeTeamMember(id,userId);if(result.success){// Refresh project details to get updated member list\nawait fetchProjectDetails();}else{setError(result.message||'Failed to remove team member');}}catch(err){console.error('Error removing team member:',err);setError('Failed to remove team member. Please try again.');}finally{setLoading(false);}};if(loading&&!project){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"linear-spinner\"})});}if(error&&!project){return/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card p-8 text-center\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-16 w-16 text-red-500 mx-auto mb-4\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold mb-2\",children:\"Error Loading Project\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/projects\",className:\"linear-btn linear-btn-primary\",children:\"Back to Projects\"})]});}if(!project)return null;const getProgressPercentage=()=>{if(!project.tasks||project.tasks.length===0)return 0;// If project is marked as completed, always return 100%\nif(project.isCompleted)return 100;// Calculate based on completed tasks\nreturn Math.round(taskStats.completed/taskStats.total*100);};return/*#__PURE__*/_jsxs(\"div\",{className:\"linear-fade-in\",children:[error&&/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card bg-red-50 border-red-200 mb-4 p-3 text-red-700\",children:[error,/*#__PURE__*/_jsx(\"button\",{onClick:()=>setError(''),className:\"ml-2 text-red-500 hover:text-red-700\",children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/projects\",className:\"mr-4 text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\",clipRule:\"evenodd\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-block w-3 h-3 rounded-full mr-2\",style:{backgroundColor:project.color||'#6366f1'}}),project.name]}),!isEditing&&project.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mt-1\",children:project.description})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:!isEditing&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsEditing(true),className:\"linear-btn linear-btn-secondary\",children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4 mr-1\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"})}),\"Edit\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleDelete,className:\"linear-btn linear-btn-danger\",disabled:loading,children:[/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4 mr-1\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"})}),\"Delete\"]})]})})]}),isEditing?/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"linear-card-header\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"Edit Project\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"linear-card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Project Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:form.name,onChange:handleChange,required:true,className:\"linear-input w-full\",placeholder:\"Project name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Color\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"color\",name:\"color\",value:form.color,onChange:handleChange,className:\"h-10 w-10 rounded-md cursor-pointer\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-600\",children:form.color})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,className:\"linear-input w-full\",placeholder:\"Project description\",rows:\"3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Due Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"dueDate\",value:form.dueDate,onChange:handleChange,className:\"linear-input w-full\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group flex items-center h-full pt-6\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"inline-flex items-center cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"isCompleted\",checked:form.isCompleted,onChange:handleChange,className:\"form-checkbox h-5 w-5 text-primary-600 rounded\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-gray-700\",children:\"Mark project as completed\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setIsEditing(false),className:\"linear-btn linear-btn-secondary\",disabled:loading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"linear-btn linear-btn-primary\",disabled:loading,children:loading?'Saving...':'Save Changes'})]})]})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"linear-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-body flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-full bg-primary-100 p-3 mr-4\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-primary-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Tasks\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold\",children:taskStats.total})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"linear-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-body flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-full bg-green-100 p-3 mr-4\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-green-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-500\",children:\"Completed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold\",children:taskStats.completed})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"linear-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-body flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-full bg-blue-100 p-3 mr-4\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-blue-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-500\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold\",children:taskStats.inProgress})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"linear-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-body flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"rounded-full bg-gray-100 p-3 mr-4\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-gray-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-500\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-xl font-bold\",children:taskStats.pending})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"linear-card mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-500 mb-1\",children:\"Project Progress\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg font-bold \".concat(getProgressPercentage()===100?'text-green-600 dark:text-green-400':''),children:[getProgressPercentage(),\"%\",getProgressPercentage()===100&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-sm bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 px-2 py-1 rounded-full\",children:\"Completed\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[project.dueDate&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm mr-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-500 mr-1\",children:\"Due:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:new Date(project.dueDate).toLocaleDateString()})]}),project.isCompleted?/*#__PURE__*/_jsx(\"span\",{className:\"linear-badge linear-badge-success\",children:\"Completed\"}):/*#__PURE__*/_jsx(\"span\",{className:\"linear-badge linear-badge-primary\",children:\"Active\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-2.5 rounded-full transition-all duration-500 ease-in-out \".concat(getProgressPercentage()===100?'bg-green-600 dark:bg-green-500':'bg-primary-600 dark:bg-primary-500'),style:{width:\"\".concat(getProgressPercentage(),\"%\")}})})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex border-b border-gray-200 mb-6\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pb-4 px-6 font-medium text-sm \".concat(activeTab==='tasks'?'border-b-2 border-primary-600 text-primary-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('tasks'),children:\"Tasks\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"pb-4 px-6 font-medium text-sm \".concat(activeTab==='team'?'border-b-2 border-primary-600 text-primary-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('team'),children:[\"Team (\",((_project$members=project.members)===null||_project$members===void 0?void 0:_project$members.length)||0,\")\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"pb-4 px-6 font-medium text-sm \".concat(activeTab==='chat'?'border-b-2 border-primary-600 text-primary-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('chat'),children:\"Chat\"}),/*#__PURE__*/_jsx(\"button\",{className:\"pb-4 px-6 font-medium text-sm \".concat(activeTab==='automations'?'border-b-2 border-primary-600 text-primary-600':'text-gray-500 hover:text-gray-700'),onClick:()=>setActiveTab('automations'),children:\"Automations\"})]}),activeTab==='tasks'?/*#__PURE__*/_jsx(TaskBoard,{project:project,onTaskUpdate:fetchProjectDetails}):activeTab==='team'?/*#__PURE__*/_jsx(_Fragment,{children:project.members&&project.members.length>0?/*#__PURE__*/_jsx(ProjectMembers,{project:project,currentUser:user}):/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card p-6 text-center dark:bg-gray-800 dark:border-gray-700\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-400 mb-4\",children:\"No team members yet.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddMemberModal(true),className:\"linear-btn linear-btn-primary dark:bg-primary-600 dark:hover:bg-primary-700 dark:text-white\",children:\"Add Team Member\"})]})}):activeTab==='automations'?/*#__PURE__*/_jsx(ProjectAutomations,{projectId:id,isOwner:project!==null&&project!==void 0&&project.owner&&user!==null&&user!==void 0&&user._id?project.owner._id.toString()===user._id.toString():false}):/*#__PURE__*/_jsx(\"div\",{className:\"chat-container h-[calc(100vh-240px)] bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsx(Chat,{chatId:id,title:\"\".concat(project.name,\" - Team Chat\"),height:\"100%\",fullWidth:true})}),showAddMemberModal&&/*#__PURE__*/_jsx(\"div\",{className:\"linear-modal-overlay\",children:/*#__PURE__*/_jsx(\"div\",{className:\"linear-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-header flex justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium\",children:\"Add Team Member\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAddMemberModal(false),className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})})]}),addMemberError&&/*#__PURE__*/_jsx(\"div\",{className:\"linear-card-body pt-0\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border-red-200 p-3 rounded-md text-red-700 text-sm mb-4\",children:addMemberError})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddMember,children:[/*#__PURE__*/_jsx(\"div\",{className:\"linear-card-body pt-0\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium mb-1\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:newMemberEmail,onChange:e=>setNewMemberEmail(e.target.value),required:true,className:\"linear-input w-full\",placeholder:\"team@example.com\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Enter the email address of the person you want to invite\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"linear-card-footer flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowAddMemberModal(false),className:\"linear-btn linear-btn-secondary\",disabled:addMemberLoading,children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"linear-btn linear-btn-primary\",disabled:addMemberLoading,children:addMemberLoading?'Adding...':'Add Member'})]})]})]})})})]});};export default ProjectDetail;","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","Link","axios","TaskBoard","ProjectContext","AuthContext","Chat","ThemeContext","ProjectMembers","ProjectAutomations","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProjectDetail","_project$members","id","navigate","getProject","updateProject","deleteProject","addTeamMember","removeTeamMember","darkMode","user","project","setProject","loading","setLoading","error","setError","view","setView","isEditing","setIsEditing","form","setForm","name","description","color","dueDate","isCompleted","showAddMemberModal","setShowAddMemberModal","newMemberEmail","setNewMemberEmail","addMemberLoading","setAddMemberLoading","addMemberError","setAddMemberError","taskStats","setTaskStats","total","completed","inProgress","pending","activeTab","setActiveTab","fetchProjectDetails","storedTab","localStorage","getItem","removeItem","tasks","stats","length","filter","t","status","token","result","success","Date","toISOString","split","message","err","console","handleChange","e","value","target","type","checked","_objectSpread","handleSubmit","preventDefault","handleDelete","window","confirm","replace","handleAddMember","trim","handleRemoveMember","userId","className","children","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","to","getProgressPercentage","Math","round","onClick","fillRule","clipRule","style","backgroundColor","disabled","onSubmit","onChange","required","placeholder","rows","concat","toLocaleDateString","width","members","onTaskUpdate","currentUser","projectId","isOwner","owner","_id","toString","chatId","title","height","fullWidth"],"sources":["C:/Users/DELL/OneDrive/Desktop/collabeaseproject/collabeasesorce/collabease/client/src/pages/ProjectDetails.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport axios from 'axios';\nimport TaskBoard from '../components/TaskBoard';\nimport { ProjectContext } from '../context/ProjectContext';\nimport { AuthContext } from '../context/AuthContext';\nimport Chat from '../components/Chat';\nimport { ThemeContext } from '../context/ThemeContext';\nimport ProjectMembers from '../components/ProjectMembers';\nimport ProjectAutomations from '../components/ProjectAutomations';\n\nconst ProjectDetail = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { getProject, updateProject, deleteProject, addTeamMember, removeTeamMember } = useContext(ProjectContext);\n  const { darkMode } = useContext(ThemeContext);\n  const { user } = useContext(AuthContext);\n  \n  const [project, setProject] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState('');\n  const [view, setView] = useState('board'); // board, list, calendar\n  const [isEditing, setIsEditing] = useState(false);\n  const [form, setForm] = useState({\n    name: '',\n    description: '',\n    color: '#6366f1',\n    dueDate: '',\n    isCompleted: false\n  });\n  const [showAddMemberModal, setShowAddMemberModal] = useState(false);\n  const [newMemberEmail, setNewMemberEmail] = useState('');\n  const [addMemberLoading, setAddMemberLoading] = useState(false);\n  const [addMemberError, setAddMemberError] = useState('');\n  const [taskStats, setTaskStats] = useState({\n    total: 0,\n    completed: 0,\n    inProgress: 0,\n    pending: 0\n  });\n  const [activeTab, setActiveTab] = useState('tasks');\n  \n  useEffect(() => {\n    fetchProjectDetails();\n    \n    // Check if there's a stored active tab in localStorage\n    const storedTab = localStorage.getItem('activeProjectTab');\n    if (storedTab) {\n      setActiveTab(storedTab);\n      localStorage.removeItem('activeProjectTab'); // Clear it after use\n    }\n  }, [id]);\n  \n  useEffect(() => {\n    if (project && project.tasks) {\n      // Calculate task statistics\n      const stats = {\n        total: project.tasks.length,\n        completed: project.tasks.filter(t => t.status === 'completed').length,\n        inProgress: project.tasks.filter(t => t.status === 'in_progress').length,\n        pending: project.tasks.filter(t => t.status === 'to_do' || t.status === 'backlog').length\n      };\n      setTaskStats(stats);\n    }\n  }, [project]);\n  \n  const fetchProjectDetails = async () => {\n      try {\n        setLoading(true);\n      setError('');\n      const token = localStorage.getItem('token');\n      \n      if (!token) {\n        setError('Authorization required. Please log in again.');\n        setLoading(false);\n        return;\n      }\n      \n      const result = await getProject(id);\n      \n      if (result.success) {\n        setProject(result.project);\n        // Initialize the form with project data\n        setForm({\n          name: result.project.name || '',\n          description: result.project.description || '',\n          color: result.project.color || '#6366f1',\n          dueDate: result.project.dueDate ? new Date(result.project.dueDate).toISOString().split('T')[0] : '',\n          isCompleted: result.project.isCompleted || false\n        });\n      } else {\n        setError(result.message || 'Failed to load project');\n      }\n      } catch (err) {\n      console.error('Error in fetchProjectDetails:', err);\n      setError('Failed to load project. Please try again.');\n      } finally {\n        setLoading(false);\n      }\n    };\n  \n  const handleChange = (e) => {\n    const value = e.target.type === 'checkbox' ? e.target.checked : e.target.value;\n    setForm({ ...form, [e.target.name]: value });\n  };\n  \n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n      setError('');\n      \n      const result = await updateProject(id, form);\n      \n      if (result.success) {\n        setProject(result.project);\n      setIsEditing(false);\n      } else {\n        setError(result.message || 'Failed to update project');\n      }\n    } catch (err) {\n      console.error('Error updating project:', err);\n      setError('Failed to update project. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleDelete = async () => {\n    if (!window.confirm('Are you sure you want to delete this project? This action cannot be undone.')) {\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setError('');\n      \n      const result = await deleteProject(id);\n      \n      if (result.success) {\n        navigate('/projects', { replace: true });\n      } else {\n        setError(result.message || 'Failed to delete project');\n      }\n    } catch (err) {\n      console.error('Error deleting project:', err);\n      setError('Failed to delete project. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  const handleAddMember = async (e) => {\n    e.preventDefault();\n    \n    if (!newMemberEmail.trim()) return;\n    \n    try {\n      setAddMemberLoading(true);\n      setAddMemberError('');\n      \n      const result = await addTeamMember(id, newMemberEmail);\n      \n      if (result.success) {\n        // Refresh project details to get updated member list\n        await fetchProjectDetails();\n        setShowAddMemberModal(false);\n        setNewMemberEmail('');\n      } else {\n        setAddMemberError(result.message || 'Failed to add team member');\n      }\n    } catch (err) {\n      console.error('Error adding team member:', err);\n      setAddMemberError('Failed to add team member. Please try again.');\n    } finally {\n      setAddMemberLoading(false);\n    }\n  };\n  \n  const handleRemoveMember = async (userId) => {\n    if (!window.confirm('Are you sure you want to remove this team member?')) {\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      setError('');\n      \n      const result = await removeTeamMember(id, userId);\n      \n      if (result.success) {\n        // Refresh project details to get updated member list\n        await fetchProjectDetails();\n      } else {\n        setError(result.message || 'Failed to remove team member');\n      }\n    } catch (err) {\n      console.error('Error removing team member:', err);\n      setError('Failed to remove team member. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n  \n  if (loading && !project) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"linear-spinner\"></div>\n      </div>\n    );\n  }\n  \n  if (error && !project) {\n    return (\n      <div className=\"linear-card p-8 text-center\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-16 w-16 text-red-500 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n        </svg>\n        <h2 className=\"text-xl font-bold mb-2\">Error Loading Project</h2>\n        <p className=\"text-gray-600 mb-6\">{error}</p>\n        <Link \n          to=\"/projects\"\n          className=\"linear-btn linear-btn-primary\"\n        >\n          Back to Projects\n        </Link>\n      </div>\n    );\n  }\n  \n  if (!project) return null;\n  \n  const getProgressPercentage = () => {\n    if (!project.tasks || project.tasks.length === 0) return 0;\n    \n    // If project is marked as completed, always return 100%\n    if (project.isCompleted) return 100;\n    \n    // Calculate based on completed tasks\n    return Math.round((taskStats.completed / taskStats.total) * 100);\n  };\n  \n  return (\n    <div className=\"linear-fade-in\">\n      {error && (\n        <div className=\"linear-card bg-red-50 border-red-200 mb-4 p-3 text-red-700\">\n          {error}\n          <button \n            onClick={() => setError('')}\n            className=\"ml-2 text-red-500 hover:text-red-700\"\n          >\n            &times;\n          </button>\n        </div>\n      )}\n      \n      <div className=\"flex justify-between items-start mb-6\">\n        <div className=\"flex items-center\">\n          <Link \n            to=\"/projects\"\n            className=\"mr-4 text-gray-500 hover:text-gray-700\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n              <path fillRule=\"evenodd\" d=\"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z\" clipRule=\"evenodd\" />\n            </svg>\n          </Link>\n          <div>\n            <h1 className=\"text-2xl font-bold flex items-center\">\n              <span \n                className=\"inline-block w-3 h-3 rounded-full mr-2\"\n            style={{ backgroundColor: project.color || '#6366f1' }}\n              ></span>\n              {project.name}\n            </h1>\n            {!isEditing && project.description && (\n              <p className=\"text-gray-600 mt-1\">{project.description}</p>\n            )}\n          </div>\n        </div>\n        \n        <div className=\"flex gap-2\">\n          {!isEditing && (\n            <>\n              <button \n                onClick={() => setIsEditing(true)}\n                className=\"linear-btn linear-btn-secondary\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\" />\n                </svg>\n                Edit\n              </button>\n              <button \n                onClick={handleDelete}\n                className=\"linear-btn linear-btn-danger\"\n                disabled={loading}\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\n                </svg>\n                Delete\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n          \n          {isEditing ? (\n        <div className=\"linear-card mb-6\">\n          <div className=\"linear-card-header\">\n            <h3 className=\"font-semibold\">Edit Project</h3>\n          </div>\n          <div className=\"linear-card-body\">\n            <form onSubmit={handleSubmit}>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div className=\"form-group\">\n                  <label className=\"block text-sm font-medium mb-1\">Project Name</label>\n                  <input\n                    type=\"text\"\n                    name=\"name\"\n                    value={form.name}\n                    onChange={handleChange}\n                    required\n                    className=\"linear-input w-full\"\n                    placeholder=\"Project name\"\n                  />\n                </div>\n                \n                <div className=\"form-group\">\n                  <label className=\"block text-sm font-medium mb-1\">Color</label>\n                  <div className=\"flex items-center\">\n                  <input\n                    type=\"color\"\n                    name=\"color\"\n                    value={form.color}\n                    onChange={handleChange}\n                      className=\"h-10 w-10 rounded-md cursor-pointer\"\n                  />\n                    <span className=\"ml-2 text-gray-600\">{form.color}</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"form-group mb-4\">\n                <label className=\"block text-sm font-medium mb-1\">Description</label>\n                <textarea\n                  name=\"description\"\n                  value={form.description}\n                  onChange={handleChange}\n                  className=\"linear-input w-full\"\n                  placeholder=\"Project description\"\n                  rows=\"3\"\n                ></textarea>\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                <div className=\"form-group\">\n                  <label className=\"block text-sm font-medium mb-1\">Due Date</label>\n                  <input\n                    type=\"date\"\n                    name=\"dueDate\"\n                    value={form.dueDate}\n                    onChange={handleChange}\n                    className=\"linear-input w-full\"\n                  />\n                </div>\n                \n                <div className=\"form-group flex items-center h-full pt-6\">\n                  <label className=\"inline-flex items-center cursor-pointer\">\n                    <input\n                      type=\"checkbox\"\n                      name=\"isCompleted\"\n                      checked={form.isCompleted}\n                      onChange={handleChange}\n                      className=\"form-checkbox h-5 w-5 text-primary-600 rounded\"\n                    />\n                    <span className=\"ml-2 text-gray-700\">Mark project as completed</span>\n                  </label>\n                </div>\n              </div>\n              \n              <div className=\"flex justify-end space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setIsEditing(false)}\n                  className=\"linear-btn linear-btn-secondary\"\n                  disabled={loading}\n                >\n                  Cancel\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"linear-btn linear-btn-primary\"\n                  disabled={loading}\n                >\n                  {loading ? 'Saving...' : 'Save Changes'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      ) : (\n        <>\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n            <div className=\"linear-card\">\n              <div className=\"linear-card-body flex items-center\">\n                <div className=\"rounded-full bg-primary-100 p-3 mr-4\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-primary-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2\" />\n                  </svg>\n                </div>\n                <div>\n                  <div className=\"text-sm font-medium text-gray-500\">Total Tasks</div>\n                  <div className=\"text-xl font-bold\">{taskStats.total}</div>\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"linear-card\">\n              <div className=\"linear-card-body flex items-center\">\n                <div className=\"rounded-full bg-green-100 p-3 mr-4\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                    </svg>\n                </div>\n                <div>\n                  <div className=\"text-sm font-medium text-gray-500\">Completed</div>\n                  <div className=\"text-xl font-bold\">{taskStats.completed}</div>\n                </div>\n              </div>\n                  </div>\n            \n            <div className=\"linear-card\">\n              <div className=\"linear-card-body flex items-center\">\n                <div className=\"rounded-full bg-blue-100 p-3 mr-4\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-blue-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                  </svg>\n                </div>\n                <div>\n                  <div className=\"text-sm font-medium text-gray-500\">In Progress</div>\n                  <div className=\"text-xl font-bold\">{taskStats.inProgress}</div>\n                </div>\n              </div>\n                </div>\n                \n            <div className=\"linear-card\">\n              <div className=\"linear-card-body flex items-center\">\n                <div className=\"rounded-full bg-gray-100 p-3 mr-4\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m-6 0H6\" />\n                  </svg>\n                </div>\n                <div>\n                  <div className=\"text-sm font-medium text-gray-500\">Pending</div>\n                  <div className=\"text-xl font-bold\">{taskStats.pending}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        \n          <div className=\"linear-card mb-6\">\n            <div className=\"linear-card-body\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <div>\n                  <div className=\"text-sm font-medium text-gray-500 mb-1\">Project Progress</div>\n                  <div className={`text-lg font-bold ${getProgressPercentage() === 100 ? 'text-green-600 dark:text-green-400' : ''}`}>\n                    {getProgressPercentage()}%\n                    {getProgressPercentage() === 100 && \n                      <span className=\"ml-2 text-sm bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 px-2 py-1 rounded-full\">\n                        Completed\n                      </span>\n                    }\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center\">\n                  {project.dueDate && (\n                    <div className=\"text-sm mr-4\">\n                      <span className=\"text-gray-500 mr-1\">Due:</span>\n                      <span className=\"font-medium\">{new Date(project.dueDate).toLocaleDateString()}</span>\n                  </div>\n                )}\n                  \n                  {project.isCompleted ? (\n                    <span className=\"linear-badge linear-badge-success\">Completed</span>\n                  ) : (\n                    <span className=\"linear-badge linear-badge-primary\">Active</span>\n                  )}\n                </div>\n              </div>\n              \n              <div className=\"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-2\">\n                <div \n                  className={`h-2.5 rounded-full transition-all duration-500 ease-in-out ${\n                    getProgressPercentage() === 100 ? 'bg-green-600 dark:bg-green-500' : 'bg-primary-600 dark:bg-primary-500'\n                  }`}\n                  style={{ width: `${getProgressPercentage()}%` }}\n                ></div>\n              </div>\n            </div>\n          </div>\n        </>\n        )}\n      \n      <div className=\"flex border-b border-gray-200 mb-6\">\n        <button \n          className={`pb-4 px-6 font-medium text-sm ${\n            activeTab === 'tasks' \n            ? 'border-b-2 border-primary-600 text-primary-600' \n            : 'text-gray-500 hover:text-gray-700'\n          }`}\n          onClick={() => setActiveTab('tasks')}\n        >\n          Tasks\n        </button>\n        <button \n          className={`pb-4 px-6 font-medium text-sm ${\n            activeTab === 'team' \n            ? 'border-b-2 border-primary-600 text-primary-600' \n            : 'text-gray-500 hover:text-gray-700'\n          }`}\n          onClick={() => setActiveTab('team')}\n        >\n          Team ({project.members?.length || 0})\n        </button>\n        <button \n          className={`pb-4 px-6 font-medium text-sm ${\n            activeTab === 'chat' \n            ? 'border-b-2 border-primary-600 text-primary-600' \n            : 'text-gray-500 hover:text-gray-700'\n          }`}\n          onClick={() => setActiveTab('chat')}\n        >\n          Chat\n        </button>\n        <button \n          className={`pb-4 px-6 font-medium text-sm ${\n            activeTab === 'automations' \n            ? 'border-b-2 border-primary-600 text-primary-600' \n            : 'text-gray-500 hover:text-gray-700'\n          }`}\n          onClick={() => setActiveTab('automations')}\n        >\n          Automations\n        </button>\n      </div>\n      \n      {activeTab === 'tasks' ? (\n        <TaskBoard project={project} onTaskUpdate={fetchProjectDetails} />\n      ) : activeTab === 'team' ? (\n        <>\n          {project.members && project.members.length > 0 ? (\n            <ProjectMembers project={project} currentUser={user} />\n          ) : (\n            <div className=\"linear-card p-6 text-center dark:bg-gray-800 dark:border-gray-700\">\n              <p className=\"text-gray-600 dark:text-gray-400 mb-4\">No team members yet.</p>\n              <button \n                onClick={() => setShowAddMemberModal(true)}\n                className=\"linear-btn linear-btn-primary dark:bg-primary-600 dark:hover:bg-primary-700 dark:text-white\"\n              >\n                Add Team Member\n              </button>\n            </div>\n          )}\n                  </>\n      ) : activeTab === 'automations' ? (\n        <ProjectAutomations \n          projectId={id} \n          isOwner={project?.owner && user?._id ? project.owner._id.toString() === user._id.toString() : false} \n        />\n      ) : (\n        <div className=\"chat-container h-[calc(100vh-240px)] bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700\">\n          <Chat \n            chatId={id} \n            title={`${project.name} - Team Chat`}\n            height=\"100%\"\n            fullWidth={true}\n          />\n        </div>\n      )}\n      \n      {/* Add Member Modal */}\n      {showAddMemberModal && (\n        <div className=\"linear-modal-overlay\">\n          <div className=\"linear-modal\">\n            <div className=\"linear-card\">\n              <div className=\"linear-card-header flex justify-between\">\n                <h3 className=\"font-medium\">Add Team Member</h3>\n                <button \n                  onClick={() => setShowAddMemberModal(false)} \n                  className=\"text-gray-500 hover:text-gray-700\"\n                >\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                    <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                  </svg>\n                </button>\n              </div>\n              \n              {addMemberError && (\n                <div className=\"linear-card-body pt-0\">\n                  <div className=\"bg-red-50 border-red-200 p-3 rounded-md text-red-700 text-sm mb-4\">\n                    {addMemberError}\n                  </div>\n                </div>\n              )}\n              \n              <form onSubmit={handleAddMember}>\n                <div className=\"linear-card-body pt-0\">\n                  <div className=\"mb-4\">\n                    <label className=\"block text-sm font-medium mb-1\">Email Address</label>\n                    <input\n                      type=\"email\"\n                      value={newMemberEmail}\n                      onChange={(e) => setNewMemberEmail(e.target.value)}\n                      required\n                      className=\"linear-input w-full\"\n                      placeholder=\"team@example.com\"\n                    />\n                    <p className=\"text-xs text-gray-500 mt-1\">\n                      Enter the email address of the person you want to invite\n                    </p>\n                  </div>\n                </div>\n                \n                <div className=\"linear-card-footer flex justify-end space-x-3\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowAddMemberModal(false)}\n                    className=\"linear-btn linear-btn-secondary\"\n                    disabled={addMemberLoading}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"linear-btn linear-btn-primary\"\n                    disabled={addMemberLoading}\n                  >\n                    {addMemberLoading ? 'Adding...' : 'Add Member'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProjectDetail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}